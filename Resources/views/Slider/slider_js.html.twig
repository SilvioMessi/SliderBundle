{##
 # This file is part of the SilvioMessiSliderBundle package.
 #
 # (c) SilvioMessi <https://github.com/SilvioMessi/SliderBundle>
 #
 # For the full copyright and license information, please view the LICENSE
 # file that was distributed with this source code.
 #}

{% javascripts '@SilvioMessiSliderBundle/Resources/public/js/noUiSlider/*' %}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}

<script>
    var slider_{{ options.slider_id }} = document.getElementById('slider_{{ options.slider_id }}');
    var slider_value_{{ options.slider_id }} = document.getElementById('slider_value_{{ options.slider_id }}');

    try {
        noUiSlider.create(slider_{{ options.slider_id }}, {
            start: [{{ options.start|join(',') }}],
            range: {
                'min': [{{ options.range_min }}],
                'max': [{{ options.range_max }}],
                {% if options.range_steps is defined %}
                {% for percentage, percentage_info in options.range_steps %}
                '{{ percentage }}': [
                    {% if percentage_info.value is defined %}
                        {{ percentage_info.value }}
                        {% if percentage_info.step is defined %}
                            ,{{ percentage_info.step }}
                        {% endif %}
                    {% endif %}
                ],
                {% endfor %}
                {% endif %}
            },
            {% if options.connect is defined %}
            connect: "{{ options.connect }}",
            {% endif %}
            {% if options.step is defined %}
            step: {{ options.step }},
            {% endif %}
        });
    }
    catch (err) {
        alert(err.message);
    }

    {% include "SilvioMessiSliderBundle:Slider:events_js.js.twig" %}

</script>